<hr>
<div class="container">
  <div class="container">
    <div class="page-header">
      <div class="row title-add-new">
        <h1 class="col-auto">Your Projects</h1>
        <div class="col-auto icon-col">

          <i class="fas fa-plus-circle" data-bs-toggle="modal" data-bs-target="#form"></i>

        </div>
      </div>
      <h2 class="indications page-subheader">Hi <%= current_user.name.split(" ").first%> ! Let's see what's going on in your team ðŸš€ </h2>
    </div>


    <div class="search-bar">
      <div class="col-auto icon-col">
        <i class="fas fa-search element-icon" aria-hidden="true"></i>
      </div>
      <div class="col-11">
        <%= form_tag projects_path, method: :get do %>
          <%= text_field_tag :query,
            params[:query],
            class: "form-control-project",
            placeholder:  'Find a project'
          %>
        <% end %>
      </div>
    </div>

    <div class="row cards-container">
      <div class="col-6">
        <h3>My projects as PM</h3>
        <ul class="list-group mb-3">
          <% @projects_pm.each do |project| %>
            <li>
              <div class="project-card">
                <%= link_to project_path(project), class: 'project-info'  do %>
                  <div class="project-card-infos">
                    <div>
                      <h2><%= project.name.truncate(20) %></h2>
                      <p>6 remaining tasks!</p>

                    </div>
                    <div class="project-actions project-card-actions ">
                      <%= link_to edit_project_path(project), class: 'p-icon' do %>
                        <i class="fas fa-pencil-alt"></i>
                      <% end %>
                      <%= link_to project_path(project), class: 'p-icon', method: 'delete', data: { confirm: "Are you sure you want to delete?" }  do %>
                        <i class="far fa-trash-alt"></i>
                      <% end %>
                    </div>
                  <% end %>
                  </div>
                <div class="project-card-infos">
                <div class="pavatar">
                  <% project.users.each do |user| %>
                    <%= image_tag user.avatar, width: 20 %>
                  <% end %>
                </div>
                  <h2 class="project-card-pricing">Due in 4 days</h2>
                </div>
              </div>
            </li>
          <% end %>
        </ul>
      </div>

      <div class="col-6">
        <h3>My projects as a worker</h3>
        <ul class="list-group mb-3">

          <% @projects_worker.each do |project| %>
            <li>
              <div class="project-card">
                <%= link_to project_path(project), class: 'project-info'  do %>
                  <div class="project-card-infos">
                    <div>
                      <h2><%= project.name.truncate(20) %></h2>
                      <p>3 remaining tasks!</p>

                    </div>
                    <div class="project-actions project-card-actions ">
                      <%= link_to edit_project_path(project), class: 'p-icon' do %>
                        <i class="fas fa-pencil-alt"></i>
                      <% end %>
                      <%= link_to project_path(project), class: 'p-icon', method: 'delete', data: { confirm: "Are you sure you want to delete?" }  do %>
                        <i class="far fa-trash-alt"></i>
                      <% end %>
                    </div>
                  <% end %>
                  </div>
                <div class="project-card-infos">
                <div class="pavatar">
                  <% project.users.each do |user| %>
                    <%= image_tag user.avatar, width: 20 %>
                  <% end %>
                </div>
                  <h2 class="project-card-pricing">Due in 2 days</h2>
                </div>
              </div>
            </li>
          <% end %>
        </ul>
      </div>

 <%= month_calendar(attribute: :due_date, events: @projects) do |date, projects| %>
    <%= date %>
    <% projects.each do |project| %>
    <div class="project">
      <p><%= project.name %></p>
    </div>
    <% end %>
    <% end %>

      <%= link_to "Add a new Project", new_project_path, class: 'btn btn-ghost' %>
    </div>
  </div>
</div>

            <div class="modal fade" id="form" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content" style="padding:50px" data-controller="mask">
                  <%= render "form", project: @project %>
                </div>
              </div>
            </div>
